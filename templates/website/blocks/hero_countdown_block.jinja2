{# Block: Hero Countdown #}
<header id="hero" class="py-20 bg-bordeaux">
    <div class="max-w-7xl mx-auto px-6">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
            <div>
                {% if value.badge_text %}
                <span class="inline-block bg-gold text-navy px-4 py-2 rounded-full text-sm font-bold mb-6" data-aos="fade-right">
                    <i class="fas fa-star mr-2" aria-hidden="true"></i> {{ value.badge_text }}
                </span>
                {% endif %}
                
                <h1 class="text-4xl md:text-6xl font-heading font-black text-white mb-6" data-aos="fade-right" data-aos-delay="100">
                    {{ value.title }}<br>
                    <span class="text-gold">{{ value.title_highlight }}</span>
                </h1>
                
                <p class="text-xl text-gray-300 mb-8 leading-relaxed" data-aos="fade-right" data-aos-delay="200">
                    {{ value.subtitle }}
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4" data-aos="fade-right" data-aos-delay="300">
                    <a href="{{ value.cta_primary_link }}" class="bg-gold text-navy font-bold px-8 py-4 rounded-full text-lg hover:bg-gold-dark transition flex items-center justify-center gap-3">
                        <i class="fas fa-ticket-alt" aria-hidden="true"></i>
                        <span>{{ value.cta_primary_text }}</span>
                    </a>
                    {% if value.cta_secondary_text and value.cta_secondary_link %}
                    <a href="{{ value.cta_secondary_link }}" class="bg-white/10 border-2 border-white text-white font-bold px-8 py-4 rounded-full text-lg hover:bg-white/20 transition flex items-center justify-center gap-3">
                        <i class="fas fa-play-circle" aria-hidden="true"></i>
                        <span>{{ value.cta_secondary_text }}</span>
                    </a>
                    {% endif %}
                </div>
            </div>
            
            {% if value.event and value.show_countdown %}
            <!-- Event Card with Countdown -->
            <div class="bg-white rounded-3xl p-8 shadow-xl" data-aos="fade-left">
                <div class="flex items-start gap-6">
                    <div class="w-20 h-20 bg-amaranth rounded-2xl flex flex-col items-center justify-center shrink-0">
                        <span class="text-white text-3xl font-black">{{ localtime(value.event.specific.start_date).strftime('%d') }}</span>
                        <span class="text-white text-xs font-bold uppercase">{{ localtime(value.event.specific.start_date).strftime('%b').upper() }}</span>
                    </div>
                    <div class="flex-grow">
                        <span class="inline-block bg-amaranth/10 text-amaranth px-3 py-1 rounded-full text-sm font-bold mb-2">
                            {{ _('PROSSIMO EVENTO') }}
                        </span>
                        <h2 class="text-2xl font-heading font-bold text-navy mb-2">{{ value.event.title }}</h2>
                        <p class="text-gray-500 mb-4">
                            <i class="fas fa-map-marker-alt text-amaranth mr-2" aria-hidden="true"></i>
                            {{ value.event.specific.location_name }}
                        </p>
                    </div>
                </div>
                
                <!-- Countdown -->
                <div class="grid grid-cols-4 gap-4 mt-6 countdown-container" 
                     data-target="{{ value.event.specific.start_date.isoformat() }}"
                     aria-label="{{ _('Conto alla rovescia') }}">
                    <div class="bg-warm-gray rounded-xl p-4 text-center">
                        <div class="text-3xl font-black text-navy countdown-days">--</div>
                        <div class="text-xs text-gray-500 uppercase">{{ _('Giorni') }}</div>
                    </div>
                    <div class="bg-warm-gray rounded-xl p-4 text-center">
                        <div class="text-3xl font-black text-navy countdown-hours">--</div>
                        <div class="text-xs text-gray-500 uppercase">{{ _('Ore') }}</div>
                    </div>
                    <div class="bg-warm-gray rounded-xl p-4 text-center">
                        <div class="text-3xl font-black text-navy countdown-minutes">--</div>
                        <div class="text-xs text-gray-500 uppercase">{{ _('Min') }}</div>
                    </div>
                    <div class="bg-warm-gray rounded-xl p-4 text-center">
                        <div class="text-3xl font-black text-navy countdown-seconds">--</div>
                        <div class="text-xs text-gray-500 uppercase">{{ _('Sec') }}</div>
                    </div>
                </div>
                
                <a href="{{ value.event.url }}" class="mt-6 block w-full bg-navy text-white font-bold py-4 rounded-full text-center hover:bg-navy-light transition">
                    {{ _('Scopri l\'Evento') }} <i class="fas fa-arrow-right ml-2" aria-hidden="true"></i>
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</header>

<script>
(function() {
    const countdownContainer = document.querySelector('.countdown-container');
    if (!countdownContainer) return;
    
    const targetDate = new Date(countdownContainer.dataset.target).getTime();
    
    function updateCountdown() {
        const now = new Date().getTime();
        const diff = targetDate - now;
        
        if (diff <= 0) {
            countdownContainer.querySelectorAll('[class*="countdown-"]').forEach(el => el.textContent = '0');
            return;
        }
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        countdownContainer.querySelector('.countdown-days').textContent = days.toString().padStart(2, '0');
        countdownContainer.querySelector('.countdown-hours').textContent = hours.toString().padStart(2, '0');
        countdownContainer.querySelector('.countdown-minutes').textContent = minutes.toString().padStart(2, '0');
        countdownContainer.querySelector('.countdown-seconds').textContent = seconds.toString().padStart(2, '0');
    }
    
    updateCountdown();
    setInterval(updateCountdown, 1000);
})();
</script>
